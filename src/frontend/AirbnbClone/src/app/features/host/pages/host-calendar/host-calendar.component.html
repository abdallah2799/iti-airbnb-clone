<div class="min-h-screen bg-white pb-10">
  <div
    class="border-b border-gray-200 sticky top-0 bg-white z-20 px-6 py-4 flex items-center justify-between"
  >
    <div class="flex items-center gap-6">
      <h1 class="text-2xl font-bold text-[#222222]">
        {{ currentDate() | date : 'MMMM yyyy' }}
      </h1>

      <div class="flex items-center bg-gray-100 rounded-lg p-1">
        <button
          (click)="prevMonth()"
          class="p-2 hover:bg-white rounded-md shadow-sm transition-all"
        >
          <lucide-icon [img]="icons.ChevronLeft" [size]="20"></lucide-icon>
        </button>
        <button (click)="goToToday()" class="px-4 text-sm font-semibold">Today</button>
        <button
          (click)="nextMonth()"
          class="p-2 hover:bg-white rounded-md shadow-sm transition-all"
        >
          <lucide-icon [img]="icons.ChevronRight" [size]="20"></lucide-icon>
        </button>
      </div>
    </div>
  </div>

  <div class="p-6">
    <div class="grid grid-cols-7 mb-2 border-b border-gray-200 pb-2">
      <div
        *ngFor="let day of weekDays"
        class="text-xs font-semibold text-gray-500 uppercase tracking-wide text-center"
      >
        {{ day }}
      </div>
    </div>

    <div class="grid grid-cols-7 border-l border-t border-gray-200">
      <div
        *ngFor="let day of calendarDays()"
        class="relative h-36 border-r border-b border-gray-200 p-2 transition-colors group"
        [ngClass]="{
          'bg-white': day.isCurrentMonth,
          'bg-gray-50': !day.isCurrentMonth,
          'bg-stripes': !day.isCurrentMonth && !day.booking
        }"
      >
        <div class="flex justify-between items-start">
          <span
            class="text-sm font-medium"
            [ngClass]="
              day.isToday
                ? 'bg-black text-white w-6 h-6 flex items-center justify-center rounded-full'
                : 'text-gray-700'
            "
          >
            {{ day.dayNumber }}
          </span>

          <span
            *ngIf="day.isCurrentMonth && !day.booking"
            class="text-xs text-gray-400 font-medium group-hover:text-gray-800"
          >
            €{{ day.price }}
          </span>
        </div>

        <div
          *ngIf="day.booking"
          class="absolute top-1/2 left-0 right-0 h-8 flex items-center px-2 z-10 cursor-pointer hover:brightness-95 transition-all"
          [ngClass]="{
            'bg-[#008489] text-white': true,
            'rounded-l-full ml-2': day.isStartOfBooking,
            'rounded-r-full mr-2': day.isEndOfBooking,
            'border-r border-[#008489]': !day.isEndOfBooking
          }"
        >
          <div
            *ngIf="day.isStartOfBooking || day.dayNumber === '1'"
            class="flex items-center gap-2 overflow-hidden whitespace-nowrap"
          >
            <img
              *ngIf="day.booking.guest.profilePictureUrl"
              [src]="day.booking.guest.profilePictureUrl"
              class="w-6 h-6 rounded-full border border-white"
            />
            <span class="text-xs font-semibold truncate shadow-sm">
              {{ day.booking.guest.fullName }} - €{{ day.booking.totalPrice }}
            </span>
          </div>
        </div>

        <div
          *ngIf="!day.isCurrentMonth && !day.booking"
          class="absolute inset-0 opacity-[0.03] pointer-events-none bg-[url('https://www.transparenttextures.com/patterns/diagonal-stripes.png')]"
        ></div>
      </div>
    </div>
  </div>
</div>
