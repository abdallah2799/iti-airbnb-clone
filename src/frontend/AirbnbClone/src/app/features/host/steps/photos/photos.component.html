<div class="min-h-screen flex flex-col">
  <header class="flex justify-between items-center px-8 py-6">
    <div class="w-8 h-8">
      <svg viewBox="0 0 32 32" fill="#222222" style="display: block; height: 100%; width: 100%">
        <path
          d="M16 1c2.008 0 3.463.963 4.751 3.269l.533 1.025c1.954 3.83 6.114 12.54 7.1 14.836l.145.353c.667 1.591.91 3.162.723 4.691l-.077.554c-.44 2.759-2.442 4.932-5.173 5.255l-.558.054a5.52 5.52 0 0 1-3.64-.947l-.43-.337-2.248-1.912-2.238 1.904c-1.119.952-2.517 1.415-3.952 1.29l-.543-.06c-2.74-.428-4.866-2.676-5.228-5.454l-.063-.54c-.133-1.514.158-3.065.866-4.618l.18-.376c.987-2.297 5.148-11.007 7.102-14.837l.532-1.024C12.537 1.963 13.992 1 16 1zm0 2c-1.273 0-2.29.475-3.002 1.72l-.47.902c-1.948 3.818-6.109 12.528-7.097 14.826-.615 1.35-.845 2.63-.728 3.85.356 2.345 2.065 4.173 4.334 4.527 1.15.18 2.312-.174 3.277-.996l2.81-2.39a1.5 1.5 0 0 1 1.752 0l2.82 2.4c.957.813 2.11 1.16 3.25.98 2.28-.268 4.073-2.01 4.436-4.313.123-1.203-.09-2.476-.692-3.828-.99-2.297-5.15-11.008-7.097-14.826l-.47-.902C18.29 3.475 17.273 3 16 3z"
        ></path>
      </svg>
    </div>
    <button
      class="px-4 py-2 rounded-full hover:bg-gray-100 text-sm font-semibold border border-gray-200"
    >
      Save & exit
    </button>
  </header>

  <main
    class="flex-1 flex flex-col items-center justify-start pt-8 px-6 pb-24 animate-fade-in w-full max-w-[1120px] mx-auto"
  >
    <input
      #fileInput
      type="file"
      multiple
      accept="image/*"
      class="hidden"
      (change)="onFileSelected($event)"
    />

    <div *ngIf="previews.length === 0" class="w-full max-w-2xl mx-auto">
      <h1 class="text-3xl font-semibold text-[#222222] mb-4">Add some photos of your place</h1>
      <p class="text-gray-500 text-lg mb-8">
        You'll need 5 photos to get started. You can add more or make changes later.
      </p>

      <div
        (drop)="onDrop($event)"
        (dragover)="onDragOver($event)"
        class="border-dashed border-2 border-gray-300 rounded-xl bg-gray-50 h-[400px] flex flex-col items-center justify-center gap-4 hover:border-black hover:bg-gray-100 transition-all cursor-pointer"
        (click)="fileInput.click()"
      >
        <lucide-icon [img]="icons.Camera" [size]="64" class="text-[#222222]"></lucide-icon>
        <button
          class="px-6 py-2 bg-[#222222] text-white font-semibold rounded-lg hover:bg-black transition-colors"
        >
          Add photos
        </button>
      </div>
    </div>

    <div *ngIf="previews.length > 0" class="w-full">
      <div class="flex justify-between items-center mb-6">
        <div>
          <h1 class="text-2xl font-semibold text-[#222222]">Choose at least 5 photos</h1>
          <p class="text-sm text-gray-500 mt-1">Drag to reorder</p>
        </div>
        <button
          (click)="fileInput.click()"
          class="w-10 h-10 rounded-full border border-gray-300 flex items-center justify-center hover:border-black transition-all"
        >
          <lucide-icon [img]="icons.Plus" [size]="20"></lucide-icon>
        </button>
      </div>

      <div class="grid grid-cols-2 md:grid-cols-2 lg:grid-cols-2 gap-4">
        <div
          *ngFor="let preview of previews; let i = index"
          class="relative aspect-[4/3] group"
          [class.col-span-2]="i === 0"
          [class.md:col-span-2]="i === 0"
          [class.lg:col-span-2]="i === 0"
          [class.h-[400px]]="i === 0"
        >
          <img
            [src]="preview"
            class="w-full h-full object-cover rounded-xl border border-gray-200"
          />

          <div
            *ngIf="i === 0"
            class="absolute top-4 left-4 bg-white px-3 py-1 rounded-md shadow-sm font-semibold text-xs text-black"
          >
            Cover Photo
          </div>

          <button
            (click)="removePhoto(i)"
            class="absolute top-4 right-4 w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-sm hover:scale-105 transition-transform group-hover:opacity-100"
          >
            <lucide-icon [img]="icons.Trash2" [size]="16" class="text-black"></lucide-icon>
          </button>
        </div>

        <div
          (click)="fileInput.click()"
          class="border border-dashed border-gray-300 rounded-xl aspect-[4/3] flex flex-col items-center justify-center cursor-pointer hover:bg-gray-50 transition-colors"
        >
          <lucide-icon [img]="icons.Plus" [size]="32" class="text-gray-400 mb-2"></lucide-icon>
          <span class="text-sm font-semibold text-gray-600">Add more</span>
        </div>
      </div>
    </div>
  </main>

  <footer class="fixed bottom-0 left-0 right-0 bg-white z-50">
    <div class="w-full h-1 bg-gray-200">
      <div class="h-full bg-black transition-all duration-500 ease-out" style="width: 90%"></div>
    </div>
    <div class="max-w-[1860px] mx-auto px-8 py-4 flex justify-between items-center">
      <button
        routerLink="/become-a-host/description"
        class="font-semibold underline hover:bg-gray-100 px-4 py-2 rounded-lg"
      >
        Back
      </button>
      <button
        (click)="onNext()"
        [disabled]="previews.length === 0"
        class="px-8 py-3 rounded-lg font-semibold text-white bg-[#222222] hover:bg-black transition-colors duration-200 disabled:opacity-50"
      >
        Next
      </button>
    </div>
  </footer>
</div>
